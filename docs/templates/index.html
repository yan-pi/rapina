{% extends "base.html" %}

{% block title %}Rapina - The Opinionated Rust Web Framework{% endblock %}

{% block content %}
<section class="hero">
    <div class="hero-container">
        <h1>The opinionated Rust web framework</h1>
        <p class="hero-tagline">Type-safe APIs with predictable patterns. Protected by default.<br>Built for developers who ship.</p>
        <div class="hero-buttons">
            <a href="{{ get_url(path='docs/getting-started/') }}" class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                Get Started
            </a>
            <a href="{{ get_url(path='docs/introduction/what-is-rapina/') }}" class="btn btn-secondary">
                Explore Docs
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
            </a>
        </div>
        <div class="hero-demo">
            <img src="{{ get_url(path='images/rapina-demo.gif') }}" alt="Rapina CLI Demo" class="hero-demo-gif">
        </div>
    </div>
    <div class="hero-showcase">
        <div class="hero-features">
            <div class="hero-feature-card">
                <h4>Type-Safe</h4>
                <p>If it compiles, it works. Extractors, errors, routes — all checked at compile time.</p>
            </div>
            <div class="hero-feature-card">
                <h4>Protected by Default</h4>
                <p>All routes require auth unless marked <code>#[public]</code>. Security isn't optional.</p>
            </div>
            <div class="hero-feature-card">
                <h4>Convention over Config</h4>
                <p>90% of apps need 10% of decisions. We made them for you.</p>
            </div>
            <div class="hero-feature-card">
                <h4>AI-Friendly</h4>
                <p>Predictable patterns that LLMs understand. Better completions, safer refactoring.</p>
            </div>
        </div>
        <div class="hero-code">
            <pre><code class="rust">use rapina::prelude::*;

#[get("/users")]
async fn list_users(
    db: State&lt;Database&gt;,
    query: Query&lt;Pagination&gt;,
) -> Result&lt;Json&lt;Vec&lt;User&gt;&gt;&gt; {
    let users = db.find_all(&amp;query).await?;
    Ok(Json(users))
}

#[public]
#[get("/health")]
async fn health() -> &amp;'static str {
    "ok"
}</code></pre>
        </div>
    </div>
</section>

<section class="content-section">
    <div class="content-container">
        <div class="content-text">
            <h2>Built for Developers, Not Committees</h2>
            <h3>An API framework, not a platform</h3>
            <p>
                Rapina is an open-source challenger to frameworks that try to do everything.
                <span class="text-highlight">A web framework should be fast, predictable, and get out of your way.</span>
                We're bringing sanity back to Rust web development — strong opinions, minimal ceremony, maximum productivity.
            </p>
        </div>
        <div class="content-visual">
            <div class="visual-card">
                <pre><code class="shell"># Install the CLI
cargo install rapina-cli

# Create a new project
rapina new my-app
cd my-app

# Start development server
rapina dev

# Check your setup
rapina doctor</code></pre>
            </div>
        </div>
    </div>
</section>

<section class="content-section reverse">
    <div class="content-container">
        <div class="content-text">
            <h2>Contracts Over Chaos</h2>
            <h3>OpenAPI generation that actually works</h3>
            <p>
                <span class="text-highlight">Every handler generates OpenAPI specs automatically.</span>
                Your types become your documentation. Breaking changes are detected before they ship.
                Clients get generated SDKs. No more "the docs say one thing but the API does another."
            </p>
        </div>
        <div class="content-visual">
            <div class="visual-card">
                <pre><code class="rust">use rapina::prelude::*;

#[derive(Deserialize, Validate, JsonSchema)]
pub struct CreateUser {
    #[validate(email)]
    pub email: String,
    #[validate(length(min = 8))]
    pub password: String,
}

#[post("/users")]
async fn create_user(
    body: Validated&lt;Json&lt;CreateUser&gt;&gt;,
) -> Result&lt;Json&lt;User&gt;&gt; {
    let user = save_user(body.into_inner()).await?;
    Ok(Json(user))
}</code></pre>
            </div>
        </div>
    </div>
</section>

<section class="content-section">
    <div class="content-container">
        <div class="content-text">
            <h2>Errors That Make Sense</h2>
            <h3>Standardized responses with trace IDs</h3>
            <p>
                Every error response follows the same structure. Every request gets a trace ID.
                <span class="text-highlight">When something breaks in production, you know exactly where to look.</span>
                No more "500 Internal Server Error" with no context. Your ops team will thank you.
            </p>
        </div>
        <div class="content-visual">
            <div class="visual-card">
                <pre><code class="json">{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "email: must be a valid email"
  },
  "trace_id": "550e8400-e29b-41d4-a716-446655440000"
}</code></pre>
            </div>
        </div>
    </div>
</section>

<section class="content-section reverse">
    <div class="content-container">
        <div class="content-text">
            <h2>Batteries Included</h2>
            <h3>Everything you need, nothing you don't</h3>
            <p>
                JWT authentication, request validation, rate limiting, compression, cookie handling —
                <span class="text-highlight">all built-in and configured with sane defaults.</span>
                When you need to customize, escape hatches exist. But most of the time, you won't need them.
            </p>
        </div>
        <div class="content-visual">
            <div class="visual-card features-grid">
                <div class="feature-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                    <span>JWT Auth</span>
                </div>
                <div class="feature-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                    <span>Validation</span>
                </div>
                <div class="feature-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                    <span>Rate Limiting</span>
                </div>
                <div class="feature-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
                    <span>Compression</span>
                </div>
                <div class="feature-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
                    <span>OpenAPI</span>
                </div>
                <div class="feature-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                    <span>Cookies</span>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="faq-section">
    <div class="faq-container">
        <h2>Frequently Asked Questions</h2>
        <div class="faq-list">
            <div class="faq-item">
                <button class="faq-question" onclick="toggleFaq(this)">
                    <span>How does Rapina compare to Axum or Actix?</span>
                    <span class="faq-icon">+</span>
                </button>
                <div class="faq-answer">
                    <p>Rapina is built directly on Hyper for maximum control and performance. Unlike Axum or Actix, Rapina is opinionated by design: authentication, error handling, validation, and project structure are built-in with sane defaults. Think of it as Rails-style conventions for Rust APIs.</p>
                </div>
            </div>
            <div class="faq-item">
                <button class="faq-question" onclick="toggleFaq(this)">
                    <span>Is Rapina production-ready?</span>
                    <span class="faq-icon">+</span>
                </button>
                <div class="faq-answer">
                    <p>Rapina is currently in alpha. We're committed to minimizing breaking changes, but until 1.0, major architectural changes may happen if necessary for long-term stability. Check the changelog and roadmap for current status.</p>
                </div>
            </div>
            <div class="faq-item">
                <button class="faq-question" onclick="toggleFaq(this)">
                    <span>What if I need to customize something?</span>
                    <span class="faq-icon">+</span>
                </button>
                <div class="faq-answer">
                    <p>Rapina is opinionated, not restrictive. Every default can be overridden. Need custom error formats? Custom auth? Different validation rules? Escape hatches exist for everything. The opinions are there to help you move fast when you don't need customization.</p>
                </div>
            </div>
            <div class="faq-item">
                <button class="faq-question" onclick="toggleFaq(this)">
                    <span>How do I get help?</span>
                    <span class="faq-icon">+</span>
                </button>
                <div class="faq-answer">
                    <p>Join our <a href="{{ config.extra.discord }}" target="_blank">Discord server</a> for community support, or open an issue on <a href="{{ config.extra.github }}" target="_blank">GitHub</a>. We also have comprehensive documentation covering all features and common patterns.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
function toggleFaq(button) {
    const item = button.parentElement;
    const isOpen = item.classList.contains('open');

    // Close all other items
    document.querySelectorAll('.faq-item').forEach(i => i.classList.remove('open'));

    // Toggle current item
    if (!isOpen) {
        item.classList.add('open');
    }
}
</script>
{% endblock %}
